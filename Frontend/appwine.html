<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

    <title>Hello, world!</title>


  </head>
  <body style="background-image: url('wine.jpg');">
    <div class="container mb-5" style="background: rgb(255, 228, 196); opacity: 0.8;">
        <div class="row justify-content-center shadow p-3 mb-5 rounded  py-5  " >
          <div class="col-md-auto" >
            <h1>Algoritmo KNN en GO</h1>
          </div>
        </div>
    </div>
    <div class="container">
        <div class="row justify-content-center shadow p-3 mb-5 rounded py-2 " style="background: rgb(255, 228, 196,0.815);" >
          <div class="col-md-auto justify-content-center shadow p-3 mb-5 rounded py-2" >
            <div class="col-md-auto justify-content-center justify-content-center"  ><h1>Bienvenido en esta página sabrá que tan bueno</h1></div>
            <div class="col-md-auto justify-content-center justify-content-center"  ><h1> es el vino que le han vendido</h1></div>
            
          </div>
        </div>
    </div>

    <div class="container shadow p-5 mb-5 rounded " style="background: rgba(255, 148, 148, 0.466);">

          <div class="row justify-content-center p-5 mb-5 rounded" style="background: rgba(255, 255, 255, 0.863);" >
                
            <div class="col-md-auto justify-content-center "  ><h4>Para saber que tan efetivo es el algotimo puede probarlo dando click en el botón "Probar". Se mostrará el porcentaje de aciertos entre las predicciones y los datos verdaderos.</h4></div>
            <div class="col-md-auto justify-content-center "  ><h4></h4> </div>
        
        </div>
        <div class="row justify-content-center  p-3 mb-5 rounded"  >
            
            <button type="submit" class="btn btn-primary" onclick="myFunction()">Probar</button>
        
        </div>

        <div class="row justify-content-center shadow p-3 mb-5 rounded  " >
            <div id="rpta" class="row justify-content-center shadow p-3 rounded bg-light" >
                
            </div>
        </div>
    </div>

    <div class="container p-5 mb-5" style="background : rgba(255, 255, 255, 0.712);">
        <div class="clo justify-content-center bg-light shadow p-5 mb-5 rounded py-5 px-8"  >

            <div class="row justify-content-center shadow p-3 mb-5 rounded py-5" style="background : rgba(241, 27, 27, 0.082);">
                <div>
                  Para probar la calidad de su vino debe completar estos datos del licor y la cantidad de vecimos con la que desea compararlo (K)
                </div>  
            </div>


            <div  class="col justify-content-center bg-light shadow p-3 mb-5 rounded py-5" >
                <div class="form-group row">
                    <label class="col-sm-2 col-form-label">Acidez Fija</label>
                    <div class="col-sm-10">
                      <input id="V1" type="text" class="form-control" id="inputPassword" placeholder="Entre 0.0 y 15.0">
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-2 col-form-label">Acidez Volátil</label>
                    <div class="col-sm-10">
                      <input id="V2" type="text" class="form-control" id="inputPassword" placeholder="Entre 0.0 y 1.0">
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-2 col-form-label">
                        Acido Cítrico</label>
                    <div class="col-sm-10">
                      <input id="V3" type="text" class="form-control" id="inputPassword" placeholder="Entre 0.0 y 1.0">
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-2 col-form-label">Azucar Residual</label>
                    <div class="col-sm-10">
                      <input id="V4" type="text" class="form-control" id="inputPassword" placeholder="Entre 0.0 y 12.0">
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-2 col-form-label">
                        Cloruro</label>
                    <div class="col-sm-10">
                      <input id="V5" type="text" class="form-control" id="inputPassword" placeholder="Entre 0.0 y 0.09">
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-2 col-form-label">
                        Dióxido de azufre libre</label>
                    <div class="col-sm-10">
                      <input id="V6" type="text" class="form-control" id="inputPassword" placeholder="Entre 0 y 60">
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-2 col-form-label">
                        Dióxido de azufre total</label>
                    <div class="col-sm-10">
                      <input id="V7" type="text" class="form-control" id="inputPassword" placeholder="Entre 0 y 200">
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-2 col-form-label">Densidad</label>
                    <div class="col-sm-10">
                      <input id="V8" type="text" class="form-control" id="inputPassword" placeholder="Entre 0.000 y 0.999">
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-2 col-form-label">PH</label>
                    <div class="col-sm-10">
                      <input id="V9" type="text" class="form-control" id="inputPassword" placeholder="Entre 2.9 y 3.9">
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-2 col-form-label">
                        Sulfato</label>
                    <div class="col-sm-10">
                      <input id="V10" type="text" class="form-control" id="inputPassword" placeholder="Entre 0.00 y 1.50">
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-2 col-form-label">
                        Alcohol</label>
                    <div class="col-sm-10">
                      <input id="V11" type="text" class="form-control" id="inputPassword" placeholder="Entre 8.0 y 12.0">
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-2 col-form-label">
                        K</label>
                    <div class="col-sm-10">
                      <input id="K" type="text" class="form-control" id="inputPassword" placeholder="K vecinos">
                    </div>
                </div>

                <div class="row justify-content-center  py-3">
                    <button type="submit" class=" justify-content-center btn btn-primary " onclick="myFunctionPost()">Probar</button>
                </div>
                
            </div>


            <div id="rptaDos" class="row justify-content-center shadow p-3 mb-5 rounded py-5" style="background : rgba(241, 27, 27, 0.082);" >
                
            </div>
        </div>
    </div>

    

    <!-- Optional JavaScript -->
    
    

    
    <script type="text/javascript">  


        
        var porcentaje
        var ana
        //carousel()



        function myFunctionPost() {


                var res
            
                $.ajax({
                    type:"POST",
                    async: false, 
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    url:"http://localhost:8000/probabilidad", //url guarda la ruta hacia donde se hace la peticion
                    data:  JSON.stringify({
                        v1:document.getElementById("V1").value,
                        v2:document.getElementById("V2").value,
                        v3:document.getElementById("V3").value,
                        v4:document.getElementById("V4").value,
                        v5:document.getElementById("V5").value,
                        v6:document.getElementById("V6").value,
                        v7:document.getElementById("V7").value,
                        v8:document.getElementById("V8").value,
                        v9:document.getElementById("V9").value,
                        v10:document.getElementById("V10").value,
                        v11:document.getElementById("V11").value,
                        kvariable: document.getElementById("K").value
                        
                        }),
                    processData: false, 
                    success:function(datos){ //success es una funcion que se utiliza si el servidor retorna informacion
                        console.log(datos.devoresultado)
                        res = datos.devoresultado
                    }
                     
                });


                var hola = document.getElementById("rptaDos")
                
                hola.innerHTML = "La calidad de su vino es de: " + res
                console.log(hola)


            }



        function myFunction() {
            
            $.ajax({
                    method: "GET",
                    async: false, 
                    global: true,
                    dataType: "json",
                    url: 'http://localhost:8000/probabilidad',
                    success: function(result){
                        console.log(result);
                        porcentaje = result[(result.length)-1].porcent;
                        console.log();
                        
                }
                });

                
                Show()
        }

        function Show() {
            var hola = document.getElementById("rpta")
                
                hola.innerHTML = "El "+ porcentaje + "% de los resultados del algoritmo coinsiden con los valores originales"
                console.log(hola)
                

        }

        
    

        
      
    </script>  



    


    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
  </body>
</html>